---

- name: Systemd
  include_tasks: systemd.yml

- name: Yum Dependencies
  become: yes
  yum:
    name: "{{ dnf_yum_dependencies }}"
    update_cache: yes
    state: present

- name: Dnf Dependencies
  become: yes
  dnf:
    name: "{{ dnf_dependencies }}"
    state: present

- name: Add Dnf Repo
  become: yes
  command: dnf config-manager --add-repo {{ dnf_repos[ansible_distribution] }}
  args:
    creates: /etc/yum.repos.d/tailscale.repo
    warn: no

- name: Install Tailscale
  become: yes
  dnf:
    name: "{{ tailscale_package }}"
    state: present
