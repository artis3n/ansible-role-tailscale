---
- name: Converge
  hosts: instance
  tasks:
    - name: Init tailscale credentials variables
      ansible.builtin.include_tasks: init_tailscale_vars.yml

    - name: Debugging
      changed_when: false
      register: thing
      ansible.builtin.shell:
        cmd: |
          echo ""
          echo "::warning::DEBUGGING"
          id -u
          echo "::warning::$(id -u)"
          cat /etc/shadow
          cat /etc/passwd
          echo ""

    - name: Print debug
      ansible.builtin.debug:
        var: thing.stdout


    - name: "Include artis3n.tailscale"
      ansible.builtin.include_role:
        name: artis3n.tailscale
      vars:
        verbose: true
